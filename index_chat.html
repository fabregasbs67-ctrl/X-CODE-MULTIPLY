
<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>X Code Chat — Official v2.4.1 (Whitelist)</title>
<script type="module">
  // Configuración de Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import { getDatabase, ref, get, child, set, update } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-database.js";

  const firebaseConfig = {
    databaseURL: "https://x-code-chat-default-rtdb.europe-west1.firebasedatabase.app/"
  };

  const app = initializeApp(firebaseConfig);
  const db = getDatabase(app);

  async function login() {
    const numero = document.getElementById('numero').value.trim();
    const pin = document.getElementById('pin').value.trim();

    if (!numero || !pin) {
      alert('Introduce tu número y PIN');
      return;
    }

    const entradaRef = ref(db, 'entradas/' + numero);
    const snapshot = await get(entradaRef);

    if (snapshot.exists()) {
      const data = snapshot.val();
      if (data.estado === 'activa') {
        localStorage.setItem('user', numero);
        localStorage.setItem('pin', pin);
        alert('Acceso concedido ✅');
        window.location.href = 'chat.html';
      } else {
        alert('Tu entrada no está activa ❌');
      }
    } else {
      alert('No estás en la lista oficial ❌');
    }
  }
</script>
<style>
  body {
    background-color: #0a0a0a;
    color: white;
    font-family: Inter, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
  }
  input {
    background: #111;
    border: 1px solid #333;
    color: white;
    padding: 10px;
    border-radius: 5px;
    margin: 5px;
  }
  button {
    background: #1e90ff;
    border: none;
    color: white;
    padding: 10px 20px;
    border-radius: 5px;
    cursor: pointer;
  }
</style>
</head>
<body>
  <h2>X Code Chat — Official</h2>
  <p>Acceso con número y PIN. Solo entradas activas pueden ingresar.</p>
  <input id="numero" type="text" placeholder="Número"><br>
  <input id="pin" type="password" placeholder="PIN"><br>
  <button onclick="login()">Entrar</button>
</body>
</html>

