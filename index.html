<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>X Code ‚Äî Verificaci√≥n de Match</title>
<style>
  :root{
    --gold:#d4af37;        /* dorado elegante */
    --gold-soft:#ffcc66;   /* dorado bot√≥n */
    --ok:#00d084;          /* verde match */
    --no:#ff5c5c;          /* rojo no-match */
    --bg:#000;
    --panel:#101010;
  }
  html,body{margin:0; padding:0; background:var(--bg); color:var(--gold);
             font-family: system-ui, -apple-system, 'Poppins', 'Montserrat', Arial, sans-serif;}
  .wrap{
    min-height:100vh; display:flex; align-items:center; justify-content:center;
    padding:24px 14px; background: radial-gradient(60% 40% at 50% 0%, rgba(212,175,55,.08), rgba(0,0,0,0) 70%) #000;
  }
  .card{
    width:100%; max-width:420px; background:var(--panel);
    border:1px solid rgba(212,175,55,.25); border-radius:16px;
    box-shadow:0 18px 60px rgba(0,0,0,.6); text-align:center;
    padding:22px 18px 24px;
  }
  .logo{ width:88px; height:88px; margin:2px auto 8px; display:block }
  h1{ margin:8px 0 14px; font-size:22px; letter-spacing:.3px }
  .inputs{ display:flex; gap:10px; justify-content:center; margin-top:6px }
  input[type=number]{
    width:46%; max-width:160px; padding:12px 10px; text-align:center;
    border-radius:10px; border:1px solid var(--gold); background:#0b0b0b;
    color:#fff; font-size:18px; outline:none; appearance: textfield;
    -moz-appearance: textfield;
  }
  input::-webkit-outer-spin-button, input::-webkit-inner-spin-button{ -webkit-appearance: none; margin: 0; }
  button{
    background:var(--gold-soft); color:#111; border:none; font-weight:700;
    padding:12px 18px; border-radius:10px; cursor:pointer; margin-top:12px;
    touch-action: manipulation;
  }
  button:active{ transform: translateY(0.5px) }
  .hint{ margin-top:10px; color:#a8a8a8; font-size:12px; min-height:16px }
  .result{ margin-top:14px; font-weight:800; font-size:20px; min-height:28px }
  .ok{ color:var(--ok) } .no{ color:var(--no) }

  /* Mobile-first tweaks */
  @media (max-width: 420px){
    .card{ padding:20px 16px }
    h1{ font-size:20px }
    .result{ font-size:18px }
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <!-- SVG del logo (dorado, fondo transparente) -->
      <svg class="logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs>
          <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">
            <stop offset="0%" stop-color="#f1d27a"/>
            <stop offset="100%" stop-color="#b08d2a"/>
          </linearGradient>
        </defs>
        <circle cx="50" cy="50" r="42" fill="none" stroke="url(#g)" stroke-width="6"/>
        <path d="M35 28 L50 50 L65 72 M65 28 L50 50 L35 72" stroke="url(#g)" stroke-width="7" stroke-linecap="round" fill="none"/>
      </svg>

      <h1>X Code ‚Äî Verificaci√≥n de Match</h1>

      <div class="inputs">
        <input id="n1" type="number" inputmode="numeric" pattern="[0-9]*" placeholder="">
        <input id="n2" type="number" inputmode="numeric" pattern="[0-9]*" placeholder="">
      </div>

      <button id="btn">Verificar</button>
      <div id="hint" class="hint">Cargando datos‚Ä¶</div>
      <div id="res" class="result"></div>
    </div>
  </div>

<script>
  // Google Sheets CSV publicado (pesta√±a Parejas). Ajusta gid si cambias de hoja.
  const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTjnhmP38eh73oT-3DTwDmqTKBL9ErGsbOCRU62gyhZ25qneFNuugkW8FB8bKb4sg/pub?gid=819499349&single=true&output=csv";

  let parejasSet = null;

  function parseCSVRow(line){
    const out=[]; let cur="", inQ=false;
    for(let i=0;i<line.length;i++){ const ch=line[i];
      if(ch==='"'){ if(inQ && line[i+1]==='"'){cur+='"'; i++;} else inQ=!inQ; }
      else if(ch===',' && !inQ){ out.push(cur); cur=""; }
      else cur+=ch;
    }
    out.push(cur); return out;
  }
  const toInt = v => { if(v==null) return null; const t=String(v).replace(/"/g,"").trim(); if(!t) return null; const n=parseInt(t,10); return Number.isFinite(n)?n:null; };

  async function loadCSV(){
    const h=document.getElementById('hint');
    try{
      const resp = await fetch(CSV_URL, { cache:'no-store' });
      const text = await resp.text();
      const lines = text.trim().split(/\r?\n/);
      if(lines.length<=1) throw new Error('CSV vac√≠o');

      const header = parseCSVRow(lines[0]).map(h=>h.trim().toLowerCase());
      const idxMin = header.indexOf('min');
      const idxMax = header.indexOf('max');
      const idxN1  = header.indexOf('numero1');
      const idxN2  = header.indexOf('numero2');

      if ((idxMin===-1 || idxMax===-1) && (idxN1===-1 || idxN2===-1))
        throw new Error('Faltan columnas Min/Max o Numero1/Numero2');

      const set = new Set();
      for(let i=1;i<lines.length;i++){
        const row = parseCSVRow(lines[i]); if(!row.length) continue;
        let a=null,b=null;
        if(idxMin!==-1 && idxMax!==-1){
          a = toInt(row[idxMin]); b = toInt(row[idxMax]);
        } else {
          const n1 = toInt(row[idxN1]); const n2 = toInt(row[idxN2]);
          if(n1==null || n2==null) continue; a = Math.min(n1,n2); b = Math.max(n1,n2);
        }
        if(a==null || b==null) continue;
        set.add(a<b ? `${a}|${b}` : `${b}|${a}`);
      }
      parejasSet = set;
      h.textContent = 'Introduce dos n√∫meros y pulsa Verificar.';
    } catch(e){
      console.error(e);
      h.textContent = 'Error cargando datos. Revisa que la hoja est√© publicada como CSV.';
    }
  }

  function verificar(){
    const res=document.getElementById('res');
    const h=document.getElementById('hint');
    if(!parejasSet){ h.textContent='Cargando datos‚Ä¶'; res.textContent=''; return; }
    const a = toInt(document.getElementById('n1').value);
    const b = toInt(document.getElementById('n2').value);
    if(a==null || b==null){ res.className='result'; res.style.color='#eaeaea'; res.textContent='Introduce ambos n√∫meros'; return; }
    if(a===b){ res.className='result no'; res.textContent='No es tu match üòÖ'; return; }
    const key = a<b ? `${a}|${b}` : `${b}|${a}`;
    const ok = parejasSet.has(key);
    res.className = 'result ' + (ok ? 'ok' : 'no');
    res.textContent = ok ? 'üî• Perfect Match üî•' : 'No es tu match üòÖ';
  }

  document.getElementById('btn').addEventListener('click', verificar);
  document.getElementById('n1').addEventListener('keyup', e => { if(e.key==='Enter') verificar(); });
  document.getElementById('n2').addEventListener('keyup', e => { if(e.key==='Enter') verificar(); });

  loadCSV();
</script>
</body>
</html>

